git:
  depth: 1

branches:
  only:
    - master

env:
 global:
  - GH_REF: "git@github.com:NewFuture/emoji.git"
  - BUILD_PATH: "build/"
  - NAME: "From-Travis-CI"
  - EMAIL: "github@newfuture.cc"

before_script:
  - echo $RSAKEY >t.rsa && base64 -d t.rsa>~/.ssh/id_rsa && rm t.rsa 
  - chmod 600 ~/.ssh/id_rsa && eval `ssh-agent`
  - git clone --depth=1 -b gh-pages "${GH_REF}" "${BUILD_PATH}"

script:
  - ./build.sh "${BUILD_PATH}"
  - ${BUILD_PATH}e.sh
  - cd ${BUILD_PATH} && ./c.sh

after_success:
  - cp ../emoji.md  emoji.md
  - git config user.name "$NAME" && git config user.email "$EMAIL"
  - emojis=(ğŸ¶ ğŸº ğŸ± ğŸ­ ğŸ¹ ğŸ° ğŸ¸ ğŸ¯ ğŸ¨ ğŸ» ğŸ· ğŸ® ğŸµ ğŸ¼ ğŸ§ ğŸ ğŸ¢ ğŸ™ ğŸ  ğŸ³ ğŸ¬ ğŸ¥ ğŸ˜€ ğŸ˜¬ ğŸ˜ ğŸ˜‚ ğŸ˜ƒ ğŸ˜„ ğŸ˜… ğŸ˜† ğŸ˜‡ ğŸ˜‰ ğŸ˜Š ğŸ™‚ ğŸ™ƒ â˜ºï¸ ğŸ˜‹ ğŸ˜Œ ğŸ˜ ğŸ˜˜ ğŸ˜— ğŸ˜™ ğŸ˜š ğŸ˜œ ğŸ˜ ğŸ˜› ğŸ¤‘ ğŸ¤“ ğŸ˜ ğŸ¤— ğŸ˜ ğŸ˜¶ ğŸ˜ ğŸ˜‘ ğŸ˜’ ğŸ™„ ğŸ¤” ğŸ˜³ ğŸ˜ ğŸ˜Ÿ ğŸ˜  ğŸ˜¡ ğŸ˜” ğŸ˜• ğŸ™ â˜¹ï¸ ğŸ˜£ ğŸ˜– ğŸ˜« ğŸ˜© ğŸ˜¤ ğŸ˜® ğŸ˜± ğŸ˜¨ ğŸ˜° ğŸ˜¯ ğŸ˜¦ ğŸ˜§ ğŸ˜¢ ğŸ˜¥ ğŸ˜ª ğŸ˜“ ğŸ˜­ ğŸ˜µ ğŸ˜² ğŸ¤ ğŸ˜· ğŸ¤’ ğŸ¤• ğŸ˜´ ğŸ’¤ ğŸ’© ğŸ˜ˆ ğŸ‘¿ ğŸ‘¹ ğŸ‘º ğŸ’€ ğŸ‘» ğŸ‘½ ğŸ¤– ğŸ˜º ğŸ˜¸ ğŸ˜¹ ğŸ˜» ğŸ˜¼ ğŸ˜½ ğŸ™€ ğŸ˜¿ ğŸ˜¾ ğŸ™Œ ğŸ‘ ğŸ‘‹ ğŸ‘ ğŸ‘Š âœŠ âœŒï¸ ğŸ‘Œ âœ‹ ğŸ’ª ğŸ™ â˜ï¸ ğŸ‘†)
  - git commit -am "Auto build from master ${emojis[$RANDOM % 121]} "
  - git push "${GH_REF}" gh-pages:gh-pages

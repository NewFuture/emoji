language: bash

os:
  - linux
  - osx

git:
  depth: 2

branches:
  only:
  - master
  - gh-pages

env:
 global:
  - GIT_AUTHOR_NAME: "NewFuture"
  - GIT_AUTHOR_EMAIL:  "${GIT_AUTHOR_NAME}@users.noreply.github.com"
  - GIT_COMMITTER_NAME: "${GIT_AUTHOR_NAME}"
  - GIT_COMMITTER_EMAIL: "${GIT_COMMITTER_NAME}@users.noreply.github.com"

install: true

before_script:
  - touch test && git add --all

script:
  - ./e.sh
  - ./c.sh
  - for S in *.sh;do bash $S;done
  - for S in *.sh;do sh $S;done
  - curl -sL https://newfuture.github.io/emoji/e.sh|bash
  - curl -sL https://newfuture.github.io/emoji/e.sh|sh
  - git commit -am "test cript from master $(./e.sh)"
  - bash -c 'git log -1|grep "^\s*:.*:.*:.*:\s*$"; exit $?'

after_failure:
  - cat .git/hooks/commit-msg

after_script:
  - git log -1
